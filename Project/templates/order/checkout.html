{% extends 'base.html' %}
{% load static %}
{% load mathfilters %}

{% block content  %}
{{ form.media.js }}
<section class="section-content padding-y bg">
<div class="container">

<!-- ============================ COMPONENT 2 ================================= -->
<div class="row">
		<main class="col-md-8">

<article class="card mb-4">
<div class="card-body">
	<h4 class="card-title mb-4">Review cart</h4>
	<div class="row">
        {% for item in cart_items %}
		<div class="col-md-6">
			<figure class="itemside  mb-4">
				<div class="aside"><img src="{{ item.product.get_image_url }}" class="border img-sm"></div>
				<figcaption class="info">
					<p>{{ item.product.name }}</p>

					<span class="text-muted">{{ item.quantity }}x = {{ item.quantity|mul:item.product.price }}</span>

				</figcaption>
			</figure>
		</div> <!-- col.// -->
        {% endfor %}
	</div> <!-- row.// -->
</div> <!-- card-body.// -->
</article> <!-- card.// -->


<article class="card mb-4">
<div class="card-body">
	<h4 class="card-title mb-4">Contact info</h4>
	        <form method="post" action="{% url 'order_save' %}">
            {% csrf_token %}
            <div class="row">

                <div class="form-group col-sm-6">
                    <label>First name</label>
                    {{form.f_name}}
                    {{form.f_name.errors}}
                </div>
                <div class="form-group col-sm-6">
                    <label>Last name</label>
                    {{form.l_name}}
                    {{form.l_name.errors}}
                </div>
                <div class="form-group col-sm-6">
                    <label>Phone</label>
                    {{form.phone}}
                    {{form.phone.errors}}
                </div>
                <div class="form-group col-sm-6">
                    <label>regions</label>
                    {{form.region}}
                    {{form.region.errors}}
                </div>
                <div class="form-group col-sm-6">
                    <label>city</label>
                    {{form.cities}}
                    {{form.cities.errors}}
                </div>
                <div class="form-group col-sm-6">
                    <label>address</label>
                    {{form.address}}
                    {{form.address.errors}}
                </div>
                <div class="form-group col-sm-6">
                    <label>order_note</label>
                    {{form.order_note}}
                    {{form.order_note.errors}}
                </div>

                <input type="submit" class="btn btn-primary btn-block" value="Place Order">

            </div> <!-- row.// -->
        </form>
</div> <!-- card-body.// -->
</article> <!-- card.// -->




<!-- accordion end.// -->

		</main> <!-- col.// -->
		<aside class="col-md-4">
			<div class="card">
		<div class="card-body">
			<dl class="dlist-align">
			  <dt>Total price:</dt>
			  <dd class="text-right">{{ total_price }}</dd>
			</dl>
			<dl class="dlist-align">
			  <dt>Tax:</dt>
			  <dd class="text-right"> {{ delevery }}</dd>
			</dl>
			<dl class="dlist-align">
			  <dt>Total:</dt>
			  <dd class="text-right text-dark b"><strong>{{ grand_total }}</strong></dd>
			</dl>
			<hr>
			<p class="text-center mb-3">
				<img src="{% static 'images/misc/payments.png' %}" height="26">
			</p>


		</div> <!-- card-body.// -->
		</div> <!-- card.// -->
		</aside> <!-- col.// -->
	</div> <!-- row.// -->

<!-- ============================ COMPONENT 2 END//  ================================= -->




</div> <!-- container .//  -->
</section>
<!-- ========================= SECTION CONTENT END// ========================= -->

{% endblock content  %}